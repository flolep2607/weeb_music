var window=self;importScripts("../audio-min.js");var deinterleave=function(e,r){for(var a=r.format.channelsPerFrame,s=e.length/a,t=new Float32Array(s*a),f=0;f<s;f++)for(var n=0;n<a;n++)t[n*s+f]=e[f*a+n];return t};self.addEventListener("message",function(e){var a,s;e.data.ogg||importScripts("../ogg.js","../vorbis.js"),e.data.ping?self.postMessage({ping:!0}):(a=e.data.buffer,(s=AV.Asset.fromBuffer(a)).on("error",function(e){self.postMessage({arrayBuffer:a,error:String(e)},[a])}),s.decodeToBuffer(function(e){var r=deinterleave(e,s),e={array:r,sampleRate:s.format.sampleRate,channels:s.format.channelsPerFrame};self.postMessage({rawAudio:e,arrayBuffer:a},[r.buffer,a])}))},!1);