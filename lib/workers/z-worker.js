!function(c){"use strict";if(c.zWorkerInitialized)throw new Error("z-worker.js should be run only once");c.zWorkerInitialized=!0,addEventListener("message",function(e){var t=e.data,r=t.type,e=t.sn,c=n[r];if(c)try{c(t)}catch(t){e={type:r,sn:e,error:function(t){return{message:t.message,stack:t.stack}}(e=t)},!void postMessage(e)}});var n={importScripts:function(t){t.scripts&&0<t.scripts.length&&importScripts.apply(void 0,t.scripts);postMessage({type:"importScripts"})},newTask:d,append:t,flush:t},u={};function d(t){var e=c[t.codecClass],r=t.sn;if(u[r])throw Error("duplicated sn");u[r]={codec:new e(t.options),crcInput:"input"===t.crcType,crcOutput:"output"===t.crcType,crc:new s},postMessage({type:"newTask",sn:r})}var f=c.performance?c.performance.now.bind(c.performance):Date.now;function t(t){var e=t.sn,r=t.type,c=t.data,n=u[e];!n&&t.codecClass&&(d(t),n=u[e]);var s,o="append"===r,p=f();if(o)try{s=n.codec.append(c,function(t){postMessage({type:"progress",sn:e,loaded:t})})}catch(t){throw delete u[e],t}else delete u[e],s=n.codec.flush();t=f()-p,p=f();c&&n.crcInput&&n.crc.append(c),s&&n.crcOutput&&n.crc.append(s);var p=f()-p,a={type:r,sn:e,codecTime:t,crcTime:p},i=[];s&&(a.data=s,i.push(s.buffer)),o||!n.crcInput&&!n.crcOutput||(a.crc=n.crc.get());try{postMessage(a,i)}catch(t){postMessage(a)}}function s(){this.crc=-1}function e(){}s.prototype.append=function(t){for(var e=0|this.crc,r=this.table,c=0,n=0|t.length;c<n;c++)e=e>>>8^r[255&(e^t[c])];this.crc=e},s.prototype.get=function(){return~this.crc},s.prototype.table=function(){for(var t,e,r=[],c=0;c<256;c++){for(e=c,t=0;t<8;t++)1&e?e=e>>>1^3988292384:e>>>=1;r[c]=e}return r}(),(c.NOOP=e).prototype.append=function(t,e){return t},e.prototype.flush=function(){}}(this);